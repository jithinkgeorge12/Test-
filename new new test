import React, { useState } from 'react';

// Custom Cell Renderer for Dates
const DateRenderer = ({ value }) => {
  const formattedDate = formatDate(value); // Format date as dd-MM-yyyy

  return <span>{formattedDate}</span>;
};

// Custom Cell Editor for Dates
const DateEditor = ({ value, setValue, stopEditing }) => {
  const [editedValue, setEditedValue] = useState(value);

  const handleInputChange = (e) => {
    setEditedValue(e.target.value);
  };

  const handleInputBlur = () => {
    setValue(editedValue);
    stopEditing(); // Stop editing when input field loses focus
  };

  return (
    <input
      type="text"
      value={editedValue}
      onChange={handleInputChange}
      onBlur={handleInputBlur}
      placeholder="dd-MM-yyyy"
    />
  );
};

// Helper function to format date as dd-MM-yyyy
const formatDate = (dateStr) => {
  const date = new Date(dateStr);
  if (!isNaN(date.getTime())) {
    const day = ('0' + date.getDate()).slice(-2);
    const month = ('0' + (date.getMonth() + 1)).slice(-2);
    const year = date.getFullYear();
    return `${day}-${month}-${year}`;
  }
  return '';
};

export { DateRenderer, DateEditor };
